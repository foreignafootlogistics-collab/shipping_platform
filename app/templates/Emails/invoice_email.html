<!doctype html>
<html>
  <body style="font-family: Arial, sans-serif; background:#f4f5f7; margin:0; padding:0;">
    <div style="max-width:760px; margin:24px auto; padding:0 12px;">

      <!-- CARD -->
      <div style="
        background:#ffffff;
        border:1px solid #e5e7eb;
        border-radius:12px;
        box-shadow:0 4px 16px rgba(0,0,0,0.04);
        padding:28px;
        color:#111827;
      ">

        <!-- HEADER -->
        <h1 style="font-size:28px; margin:0 0 6px; font-weight:800; color:#111827;">
          Invoice {{ invoice.number }}
        </h1>

        <p style="margin:0; font-size:14px; color:#6b7280;">
          Foreign A Foot Logistics Limited
        </p>

        <hr style="border:none; border-top:1px solid #e5e7eb; margin:18px 0;">

        <!-- GREETING -->
        <p style="margin:0 0 8px; font-size:15px;">
          Hi {{ full_name }},
        </p>

        <p style="margin:0 0 14px; font-size:15px; color:#374151;">
          Your invoice has been generated. A PDF copy is attached to this email for your records.
        </p>

        <!-- TOTAL -->
        <div style="
          background:#faf7ff;
          border:1px solid #e9d5ff;
          border-radius:10px;
          padding:18px;
          margin:16px 0;
        ">
          <div style="font-size:14px; color:#6b7280;">Total Due</div>
          <div style="font-size:34px; font-weight:900; color:#4a148c;">
            {{ invoice.total_due|jmd }}
          </div>
        </div>

        <!-- CTA -->
        <div style="margin:18px 0 8px;">
          <a href="{{ transactions_url }}"
             style="
               display:inline-block;
               background:#4a148c;
               color:#ffffff;
               text-decoration:none;
               padding:14px 22px;
               border-radius:8px;
               font-weight:700;
               font-size:15px;
             ">
            View Invoice / Pay
          </a>
        </div>

        <p style="font-size:13px; color:#6b7280; margin:6px 0 20px;">
          This link opens your Transactions page with invoice history and payment options.
        </p>

        <!-- INVOICE DETAILS -->
        <div style="margin-bottom:14px;">
          <div style="font-weight:700;">Invoice Details</div>
          <div style="font-size:13px; color:#6b7280;">
            Date: {{ invoice.date|datetimeformat('%Y-%m-%d %H:%M') if invoice.date else '' }}
          </div>
        </div>

        <div style="display:flex; gap:16px; margin-bottom:18px; flex-wrap:wrap;">
          <div style="flex:1; min-width:220px;">
            <div style="font-weight:600;">Customer</div>
            <div>{{ invoice.customer_name }}</div>
            <div style="font-size:12px; color:#6b7280;">{{ invoice.customer_code }}</div>
          </div>

          <div style="flex:1; min-width:220px; text-align:right;">
            <div>Subtotal: <b>{{ invoice.subtotal|jmd }}</b></div>
            <div>Discounts: <b>- {{ invoice.discount_total|jmd }}</b></div>
            <div style="margin-top:6px;">
              Amount Owed: <b>{{ invoice.total_due|jmd }}</b>
            </div>
          </div>
        </div>

        <!-- PACKAGES TABLE -->
        <table style="width:100%; border-collapse:collapse; margin-top:6px;">
          <thead>
            <tr style="background:#f9fafb;">
              <th style="padding:10px; border:1px solid #e5e7eb; text-align:left;">House AWB#</th>
              <th style="padding:10px; border:1px solid #e5e7eb; text-align:left;">Information</th>
              <th style="padding:10px; border:1px solid #e5e7eb; text-align:left;">Our Fees</th>
              <th style="padding:10px; border:1px solid #e5e7eb; text-align:left;">Govt Fees</th>
              <th style="padding:10px; border:1px solid #e5e7eb; text-align:left;">Discount</th>
            </tr>
          </thead>

          <tbody>
            {% for p in invoice.packages %}
            <tr>
              <td style="padding:10px; border:1px solid #e5e7eb; font-weight:700;">
                {{ p.house_awb }}
              </td>

              <td style="padding:10px; border:1px solid #e5e7eb;">
                <div><b>Weight:</b> {{ p.weight }} lbs</div>
                <div><b>USD Value:</b> ${{ "%.2f"|format(p.value or 0) }}</div>
                <div style="color:#6b7280;">{{ p.description }}</div>
              </td>

              <td style="padding:10px; border:1px solid #e5e7eb;">
                <div>Freight: {{ (p.freight or 0)|jmd }}</div>
                <div>Handling: {{ (p.handling or 0)|jmd }}</div>
                <div>Other: {{ (p.other_charges or 0)|jmd }}</div>
              </td>

              <td style="padding:10px; border:1px solid #e5e7eb;">
                <div>Duty: {{ (p.duty or 0)|jmd }}</div>
                <div>SCF: {{ (p.scf or 0)|jmd }}</div>
                <div>ENVL: {{ (p.envl or 0)|jmd }}</div>
                <div>CAF: {{ (p.caf or 0)|jmd }}</div>
                <div>GCT: {{ (p.gct or 0)|jmd }}</div>
              </td>

              <td style="padding:10px; border:1px solid #e5e7eb;">
                {{ (p.discount_due or 0)|jmd }}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>

        <!-- FOOTER -->
        <div style="margin-top:22px; font-size:12px; color:#6b7280; line-height:1.6;">
          <strong>Foreign A Foot Logistics Limited</strong><br>
          Unit 7, Lot C22, Cedar Manor Gregory Park P.O. St. Catherine<br>
          (876) 210-4291 Â· foreignafootlogistics@gmail.com
        </div>

      </div>
    </div>
  </body>
</html>

