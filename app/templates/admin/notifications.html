{% extends "layout_admin.html" %}
{% block title %}Notifications{% endblock %}

{% block content %}
<div class="container mt-4">
    <h3 class="mb-3">Notifications</h3>

    {% if notes|length == 0 %}
        <p class="text-muted">No notifications.</p>
    {% else %}
        <ul class="list-group">
            {% for n in notes %}
            <li class="list-group-item d-flex justify-content-between align-items-start">
                <div>
                    <div>{{ n.message }}</div>
                    <div class="small text-muted">{{ n.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
                    {% if not n.is_read %}
                        <span class="badge bg-primary mt-1">Unread</span>
                    {% endif %}
                </div>
                {% if not n.is_read %}
                <form method="POST" action="{{ url_for('admin.mark_notification_read', nid=n.id) }}">
                    <button class="btn btn-sm btn-outline-secondary">Mark read</button>
                </form>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    {% endif %}
</div>
{% endblock %}
