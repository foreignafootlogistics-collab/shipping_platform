{# PARTIAL ONLY: no extends #}

<div class="p-1">
  <div class="mb-2">
    <div class="fw-bold">Change Email</div>
    <div class="text-muted small">
      For security, confirm your password to change your email.
    </div>
  </div>

  <form id="changeEmailForm" method="post">
    {# CSRF: if you use Flask-WTF CSRFProtect globally, csrf_token() exists #}
    {% if csrf_token is defined %}
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    {% endif %}

    <div class="mb-3">
      <label class="form-label">Current Password</label>
      <div class="input-group">
        <input type="password" class="form-control" name="current_password" id="ceCurrentPassword" required>
        <button class="btn btn-outline-secondary" type="button" id="ceTogglePw" title="Show/Hide">
          <i class="bi bi-eye"></i>
        </button>
      </div>
      <div class="text-danger small mt-1 d-none" id="ceErrCurrentPassword"></div>
    </div>

    <div class="mb-3">
      <label class="form-label">New Email Address</label>
      <input type="email" class="form-control" name="new_email" id="ceNewEmail" value="" required>
      <div class="text-danger small mt-1 d-none" id="ceErrNewEmail"></div>
    </div>

    <div class="alert alert-success d-none" id="ceSuccess"></div>
    <div class="alert alert-danger d-none" id="ceFail"></div>

    <div class="d-flex justify-content-end gap-2">
      <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
      <button type="submit" class="btn btn-primary" id="ceSubmitBtn">
        Update Email
      </button>
    </div>
  </form>
</div>
