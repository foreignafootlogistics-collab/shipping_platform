{% extends "layout_customer.html" %}
{% block title %}Change Password{% endblock %}

{% block content %}
<style>
  .password-wrapper {
    font-family: 'Poppins', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 40px 18px;
  }

  .pw-container {
    background: #fff;
    border-radius: 16px;
    padding: 40px;
    max-width: 520px;
    width: 100%;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    text-align: center;
  }

  .pw-container h2 {
    font-family: 'Merriweather', serif;
    font-size: 26px;
    color: #4a148c;
    margin-bottom: 8px;
    letter-spacing: 0.05em;
  }

  .subtitle {
    color: #6b7280;
    margin: 0 0 22px 0;
    font-size: 14px;
    line-height: 1.4;
  }

  label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    text-align: left;
    color: #333;
  }

  input[type="password"] {
    width: 100%;
    padding: 14px;
    margin-bottom: 16px;
    border: 2px solid #ddd;
    border-radius: 10px;
    font-size: 16px;
    outline: none;
    transition: border-color 0.2s ease;
  }

  input[type="password"]:focus {
    border-color: #764ba2;
  }

  button {
    width: 100%;
    padding: 14px;
    background: #764ba2;
    border: none;
    border-radius: 10px;
    font-weight: bold;
    color: #fff;
    font-size: 18px;
    cursor: pointer;
    transition: background 0.2s ease;
  }

  button:hover {
    background: #5b3683;
  }

  .alert {
    padding: 12px;
    border-radius: 10px;
    margin-bottom: 15px;
    font-weight: 600;
    text-align: left;
  }

  .alert-danger {
    background: #ffdde0;
    color: #a70011;
    border: 1px solid #ffb8c0;
  }

  .alert-success {
    background: #d8f5e0;
    color: #007b39;
    border: 1px solid #a9e9bf;
  }

  .hint {
    text-align: left;
    margin-top: 10px;
    font-size: 12.5px;
    color: #6b7280;
    line-height: 1.35;
  }
</style>

<div class="password-wrapper">
  <div class="pw-container">
    <h2>Change Your Password</h2>
    <p class="subtitle">
      Enter your current password, then choose a new one. Make sure both new fields match.
    </p>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="POST" autocomplete="off">

      <!-- âœ… CSRF TOKEN -->
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

      <label for="current_password">Current Password</label>
      <input
        type="password"
        name="current_password"
        id="current_password"
        required
        placeholder="Enter current password"
      />

      <label for="new_password">New Password</label>
      <input
        type="password"
        name="new_password"
        id="new_password"
        required
        placeholder="Enter new password"
        minlength="8"
      />

      <label for="confirm_password">Confirm New Password</label>
      <input
        type="password"
        name="confirm_password"
        id="confirm_password"
        required
        placeholder="Confirm new password"
        minlength="8"
      />

      <button type="submit">Update Password</button>

      <div class="hint">
        Tip: Use at least 8 characters with a mix of letters and numbers.
      </div>
    </form>
  </div>
</div>
{% endblock %}
